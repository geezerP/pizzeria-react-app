{"ast":null,"code":"var _jsxFileName = \"/home/geezer/projects/pizzeria/pizzeria-react-app/src/components/cart/CartPage.js\";\nimport React, { Component } from 'react';\nimport CartRow from './CartRow';\nimport './CartPage.css';\nimport { Link, withRouter } from 'react-router-dom';\nimport { syncCartAction, removeFromCartAction } from '../../actions/cartActions';\nimport { submitOrderAction } from '../../actions/ordersActions';\nimport { connect } from 'react-redux';\n\nclass CartPage extends Component {\n  onCheckoutButtonClick() {\n    let products = [];\n\n    for (let element of this.props.cart) {\n      let product = this.props.products.find(p => p._id === element.id);\n      products.push({\n        id: element.id,\n        name: product.name,\n        quantity: element.quantity,\n        price: product.price\n      });\n    }\n\n    this.props.submitOrder(products);\n    this.props.history.push('/orders');\n  }\n\n  render() {\n    let total = 0;\n    let cartIds = this.props.cart.map(c => c.id);\n    let productsInCart = this.props.products.filter(p => cartIds.includes(p._id));\n\n    for (let product of productsInCart) {\n      let quantity = this.props.cart.find(i => i.id === product._id).quantity;\n      product.quantity = quantity;\n      total += product.quantity * product.price;\n    }\n\n    let cartRows = productsInCart.map((p, i) => React.createElement(CartRow, {\n      key: i,\n      product: p,\n      syncCart: this.props.syncCart,\n      removeFromCart: this.props.removeFromCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }));\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      id: \"cart\",\n      className: \"table table-hover table-condensed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      style: {\n        'width': 50\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, \"Product\"), React.createElement(\"th\", {\n      style: {\n        'width': 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"Price\"), React.createElement(\"th\", {\n      style: {\n        'width': 8\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(\"th\", {\n      style: {\n        'width': 22\n      },\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, \"Subtotal\"), React.createElement(\"th\", {\n      style: {\n        'width': 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, cartRows), React.createElement(\"tfoot\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/menu\",\n      className: \"btn btn-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-angle-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), \" Continue Shopping\")), React.createElement(\"td\", {\n      colSpan: \"2\",\n      className: \"hidden-xs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }), React.createElement(\"td\", {\n      className: \"hidden-xs text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Total $\", total.toFixed(2))), productsInCart.length > 0 && React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.onCheckoutButtonClick.bind(this),\n      className: \"btn btn-success btn-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Checkout \", React.createElement(\"i\", {\n      className: \"fa fa-angle-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    products: state.products,\n    cart: state.cart\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    syncCart: (id, quantity) => dispatch(syncCartAction(id, quantity)),\n    removeFromCart: id => dispatch(removeFromCartAction(id)),\n    submitOrder: data => dispatch(submitOrderAction(data))\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(CartPage));","map":{"version":3,"sources":["/home/geezer/projects/pizzeria/pizzeria-react-app/src/components/cart/CartPage.js"],"names":["React","Component","CartRow","Link","withRouter","syncCartAction","removeFromCartAction","submitOrderAction","connect","CartPage","onCheckoutButtonClick","products","element","props","cart","product","find","p","_id","id","push","name","quantity","price","submitOrder","history","render","total","cartIds","map","c","productsInCart","filter","includes","i","cartRows","syncCart","removeFromCart","toFixed","length","bind","mapStateToProps","state","mapDispatchToProps","dispatch","data"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport CartRow from './CartRow'\nimport './CartPage.css'\nimport {Link, withRouter} from 'react-router-dom'\nimport {syncCartAction, removeFromCartAction} from '../../actions/cartActions'\nimport {submitOrderAction} from '../../actions/ordersActions'\nimport {connect} from 'react-redux'\n\nclass CartPage extends Component {\n  onCheckoutButtonClick () {\n    let products = []\n    for (let element of this.props.cart) {\n      let product = this.props.products.find(p => p._id === element.id)\n      products.push({\n        id: element.id,\n        name: product.name,\n        quantity: element.quantity,\n        price: product.price\n      })\n    }\n    this.props.submitOrder(products)\n    this.props.history.push('/orders')\n  }\n\n  render () {\n    let total = 0\n    let cartIds = this.props.cart.map(c => c.id)\n    let productsInCart = this.props.products.filter(p => cartIds.includes(p._id))\n\n    for (let product of productsInCart) {\n      let quantity = this.props.cart.find(i => i.id === product._id).quantity\n      product.quantity = quantity\n      total += product.quantity * product.price\n    }\n\n    let cartRows = productsInCart.map((p, i) => (<CartRow\n      key={i}\n      product={p}\n      syncCart={this.props.syncCart}\n      removeFromCart={this.props.removeFromCart} />))\n\n    return (\n      <div className='container'>\n        <table id='cart' className='table table-hover table-condensed'>\n          <thead>\n            <tr>\n              <th style={{ 'width': 50 }}>Product</th>\n              <th style={{ 'width': 10 }}>Price</th>\n              <th style={{ 'width': 8 }}>Quantity</th>\n              <th style={{ 'width': 22 }} className='text-center'>Subtotal</th>\n              <th style={{ 'width': 10 }} />\n            </tr>\n          </thead>\n          <tbody>\n            {cartRows}\n          </tbody>\n          <tfoot>\n            <tr>\n              <td><Link to='/menu' className='btn btn-warning'><i className='fa fa-angle-left' /> Continue Shopping</Link></td>\n              <td colSpan='2' className='hidden-xs' />\n              <td className='hidden-xs text-center'><strong>Total ${total.toFixed(2)}</strong></td>\n              {productsInCart.length > 0 && <td><button onClick={this.onCheckoutButtonClick.bind(this)} className='btn btn-success btn-block'>Checkout <i className='fa fa-angle-right' /></button></td>}\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps (state) {\n  return {\n    products: state.products,\n    cart: state.cart\n  }\n}\n\nfunction mapDispatchToProps (dispatch) {\n  return {\n    syncCart: (id, quantity) => dispatch(syncCartAction(id, quantity)),\n    removeFromCart: (id) => dispatch(removeFromCartAction(id)),\n    submitOrder: (data) => dispatch(submitOrderAction(data))\n  }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(CartPage))\n"]},"metadata":{},"sourceType":"module"}