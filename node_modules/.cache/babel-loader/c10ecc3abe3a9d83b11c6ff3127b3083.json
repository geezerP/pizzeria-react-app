{"ast":null,"code":"var _jsxFileName = \"/home/geezer/projects/pizzeria/pizzeria-react-app/src/components/orders/OrdersPage.js\";\nimport React, { Component } from 'react';\nimport OrdersRow from './OrdersRow';\nimport Auth from '../../utils/auth';\nimport { fetchUserOrdersAction, fetchPendingOrdersAction, approveOrderAction } from '../../actions/ordersActions';\nimport { connect } from 'react-redux';\n\nclass OrdersPage extends Component {\n  constructor(props) {\n    super(props);\n    this.onApproveButtonClick = this.onApproveButtonClick.bind(this);\n  }\n\n  componentWillMount() {\n    if (Auth.isUserAdmin()) {\n      this.props.fetchPendingOrders();\n    } else {\n      this.props.fetchUserOrders();\n    }\n  }\n\n  onApproveButtonClick(id) {\n    this.props.approveOrder(id);\n  }\n\n  render() {\n    let heading;\n    let noOrdersMessage;\n    let orders;\n    const isAdmin = Auth.isUserAdmin();\n\n    if (isAdmin) {\n      orders = this.props.pendingOrders.sort((a, b) => new Date(b.date) - new Date(a.date)).map((o, i) => React.createElement(OrdersRow, {\n        key: o._id,\n        order: o,\n        index: i,\n        onApprove: this.onApproveButtonClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }));\n      heading = 'Pending Orders';\n      noOrdersMessage = 'There are currently no pending orders!';\n    } else {\n      orders = this.props.userOrders.sort((a, b) => new Date(b.date) - new Date(a.date)).map((o, i) => React.createElement(OrdersRow, {\n        key: o._id,\n        order: o,\n        index: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }));\n      heading = 'My Orders';\n      noOrdersMessage = 'You have not made any orders!';\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      style: {\n        'paddingTop': 25\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, heading), React.createElement(\"div\", {\n      className: \"row\",\n      style: {\n        'paddingTop': 25\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12\",\n      id: \"customer-orders\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-hover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Order\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Date\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"Total\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"Status\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"View\"), isAdmin && React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"Action\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, orders)), orders.length === 0 && React.createElement(\"h3\", {\n      className: \"text-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, noOrdersMessage))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userOrders: state.userOrders,\n    pendingOrders: state.pendingOrders\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchUserOrders: () => dispatch(fetchUserOrdersAction()),\n    fetchPendingOrders: () => dispatch(fetchPendingOrdersAction()),\n    approveOrder: id => dispatch(approveOrderAction(id))\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OrdersPage);","map":{"version":3,"sources":["/home/geezer/projects/pizzeria/pizzeria-react-app/src/components/orders/OrdersPage.js"],"names":["React","Component","OrdersRow","Auth","fetchUserOrdersAction","fetchPendingOrdersAction","approveOrderAction","connect","OrdersPage","constructor","props","onApproveButtonClick","bind","componentWillMount","isUserAdmin","fetchPendingOrders","fetchUserOrders","id","approveOrder","render","heading","noOrdersMessage","orders","isAdmin","pendingOrders","sort","a","b","Date","date","map","o","i","_id","userOrders","length","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport OrdersRow from './OrdersRow'\nimport Auth from '../../utils/auth'\nimport {fetchUserOrdersAction, fetchPendingOrdersAction, approveOrderAction} from '../../actions/ordersActions'\nimport {connect} from 'react-redux'\n\nclass OrdersPage extends Component {\n  constructor (props) {\n    super(props)\n\n    this.onApproveButtonClick = this.onApproveButtonClick.bind(this)\n  }\n\n  componentWillMount () {\n    if (Auth.isUserAdmin()) {\n      this.props.fetchPendingOrders()\n    } else {\n      this.props.fetchUserOrders()\n    }\n  }\n\n  onApproveButtonClick (id) {\n    this.props.approveOrder(id)\n  }\n\n  render () {\n    let heading\n    let noOrdersMessage\n    let orders\n    const isAdmin = Auth.isUserAdmin()\n    if (isAdmin) {\n      orders = this.props.pendingOrders.sort((a, b) => new Date(b.date) - new Date(a.date)).map((o, i) => (<OrdersRow key={o._id} order={o} index={i} onApprove={this.onApproveButtonClick} />))\n      heading = 'Pending Orders'\n      noOrdersMessage = 'There are currently no pending orders!'\n    } else {\n      orders = this.props.userOrders.sort((a, b) => new Date(b.date) - new Date(a.date)).map((o, i) => (<OrdersRow key={o._id} order={o} index={i} />))\n      heading = 'My Orders'\n      noOrdersMessage = 'You have not made any orders!'\n    }\n\n    return (\n      <div className='container' style={{'paddingTop': 25}}>\n        <h1 className='text-center'>{heading}</h1>\n        <div className='row' style={{'paddingTop': 25}}>\n          <div className='col-md-12' id='customer-orders'>\n            <div className='box'>\n              <div className='table-responsive'>\n                <table className='table table-hover'>\n                  <thead>\n                    <tr>\n                      <th>Order</th>\n                      <th>Date</th>\n                      <th>Total</th>\n                      <th>Status</th>\n                      <th>View</th>\n                      {isAdmin && <th>Action</th>}\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {orders}\n                  </tbody>\n                </table>\n                {orders.length === 0 && <h3 className='text-warning'>{noOrdersMessage}</h3>}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps (state) {\n  return {\n    userOrders: state.userOrders,\n    pendingOrders: state.pendingOrders\n  }\n}\n\nfunction mapDispatchToProps (dispatch) {\n  return {\n    fetchUserOrders: () => dispatch(fetchUserOrdersAction()),\n    fetchPendingOrders: () => dispatch(fetchPendingOrdersAction()),\n    approveOrder: (id) => dispatch(approveOrderAction(id))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OrdersPage)\n"]},"metadata":{},"sourceType":"module"}