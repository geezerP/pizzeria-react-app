{"ast":null,"code":"var _jsxFileName = \"/home/geezer/projects/pizzeria/pizzeria-react-app/src/components/orders/OrderDetailsPage.js\";\nimport React, { Component } from 'react';\nimport OrderDetailsRow from './OrderDetailsRow';\nimport Auth from '../../utils/auth';\nimport NotFoundPage from '../common/NotFound/NotFoundPage';\nimport { fetchUserOrdersAction, fetchPendingOrdersAction } from '../../actions/ordersActions';\nimport { connect } from 'react-redux';\n\nclass OrderDetailsPage extends Component {\n  componentWillMount() {\n    if (Auth.isUserAdmin()) {\n      this.props.fetchPendingOrders();\n    } else {\n      this.props.fetchUserOrders();\n    }\n  }\n\n  render() {\n    let orders;\n\n    if (Auth.isUserAdmin()) {\n      if (this.props.pendingOrders.length === 0) {\n        return React.createElement(\"h3\", {\n          className: \"text-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 21\n          },\n          __self: this\n        }, \"Loading...\");\n      }\n\n      orders = this.props.pendingOrders;\n    } else {\n      if (this.props.userOrders.length === 0) {\n        return React.createElement(\"h3\", {\n          className: \"text-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 26\n          },\n          __self: this\n        }, \"Loading...\");\n      }\n\n      orders = this.props.userOrders;\n    }\n\n    let orderId = this.props.match.params.id;\n    let order = orders.find(o => o._id === orderId);\n\n    if (!order) {\n      return React.createElement(NotFoundPage, {\n        errMessage: \"ORDER NOT FOUND\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      });\n    }\n\n    let totalPrice = 0;\n\n    for (const product of order.products) {\n      totalPrice += product.quantity * product.price;\n    }\n\n    let products = order.products.map((p, i) => React.createElement(OrderDetailsRow, {\n      key: i,\n      product: p,\n      index: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }));\n    return React.createElement(\"div\", {\n      className: \"container mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"Order #\", order._id), React.createElement(\"div\", {\n      className: \"row space-top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12 mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"font-weight-bold lead text-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Products In Order:\"), \" \", React.createElement(\"span\", {\n      className: \"ml-2 lead\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, order.products.length)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"font-weight-bold lead text-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Date:\"), \" \", React.createElement(\"span\", {\n      className: \"ml-2 lead\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, new Date(order.date).toLocaleString())), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"font-weight-bold lead text-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"Total Price:\"), \" \", React.createElement(\"span\", {\n      className: \"ml-2 lead\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"$\", totalPrice.toFixed(2))))), React.createElement(\"div\", {\n      className: \"row mt-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12\",\n      id: \"customer-orders\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-hover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Product\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Price\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Subtotal\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, products)))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userOrders: state.userOrders,\n    pendingOrders: state.pendingOrders\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    fetchUserOrders: () => dispatch(fetchUserOrdersAction()),\n    fetchPendingOrders: () => dispatch(fetchPendingOrdersAction())\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OrderDetailsPage);","map":{"version":3,"sources":["/home/geezer/projects/pizzeria/pizzeria-react-app/src/components/orders/OrderDetailsPage.js"],"names":["React","Component","OrderDetailsRow","Auth","NotFoundPage","fetchUserOrdersAction","fetchPendingOrdersAction","connect","OrderDetailsPage","componentWillMount","isUserAdmin","props","fetchPendingOrders","fetchUserOrders","render","orders","pendingOrders","length","userOrders","orderId","match","params","id","order","find","o","_id","totalPrice","product","products","quantity","price","map","p","i","Date","date","toLocaleString","toFixed","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,OAAOC,YAAP,MAAyB,iCAAzB;AACA,SAAQC,qBAAR,EAA+BC,wBAA/B,QAA8D,6BAA9D;AACA,SAASC,OAAT,QAAwB,aAAxB;;AAEA,MAAMC,gBAAN,SAA+BP,SAA/B,CAAyC;AACvCQ,EAAAA,kBAAkB,GAAI;AACpB,QAAIN,IAAI,CAACO,WAAL,EAAJ,EAAwB;AACtB,WAAKC,KAAL,CAAWC,kBAAX;AACD,KAFD,MAEO;AACL,WAAKD,KAAL,CAAWE,eAAX;AACD;AACF;;AAEDC,EAAAA,MAAM,GAAI;AACR,QAAIC,MAAJ;;AACA,QAAIZ,IAAI,CAACO,WAAL,EAAJ,EAAwB;AACtB,UAAI,KAAKC,KAAL,CAAWK,aAAX,CAAyBC,MAAzB,KAAoC,CAAxC,EAA2C;AACzC,eAAQ;AAAI,UAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAR;AACD;;AACDF,MAAAA,MAAM,GAAG,KAAKJ,KAAL,CAAWK,aAApB;AACD,KALD,MAKO;AACL,UAAI,KAAKL,KAAL,CAAWO,UAAX,CAAsBD,MAAtB,KAAiC,CAArC,EAAwC;AACtC,eAAQ;AAAI,UAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAR;AACD;;AACDF,MAAAA,MAAM,GAAG,KAAKJ,KAAL,CAAWO,UAApB;AACD;;AAED,QAAIC,OAAO,GAAG,KAAKR,KAAL,CAAWS,KAAX,CAAiBC,MAAjB,CAAwBC,EAAtC;AACA,QAAIC,KAAK,GAAGR,MAAM,CAACS,IAAP,CAAYC,CAAC,IAAIA,CAAC,CAACC,GAAF,KAAUP,OAA3B,CAAZ;;AACA,QAAI,CAACI,KAAL,EAAY;AACV,aACE,oBAAC,YAAD;AAAc,QAAA,UAAU,EAAC,iBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAGD;;AAED,QAAII,UAAU,GAAG,CAAjB;;AACA,SAAK,MAAMC,OAAX,IAAsBL,KAAK,CAACM,QAA5B,EAAsC;AACpCF,MAAAA,UAAU,IAAIC,OAAO,CAACE,QAAR,GAAmBF,OAAO,CAACG,KAAzC;AACD;;AAED,QAAIF,QAAQ,GAAGN,KAAK,CAACM,QAAN,CAAeG,GAAf,CAAmB,CAACC,CAAD,EAAIC,CAAJ,KAAW,oBAAC,eAAD;AAAiB,MAAA,GAAG,EAAEA,CAAtB;AAAyB,MAAA,OAAO,EAAED,CAAlC;AAAqC,MAAA,KAAK,EAAEC,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA9B,CAAf;AAEA,WACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAoCX,KAAK,CAACG,GAA1C,CADF,EAEE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAG;AAAM,MAAA,SAAS,EAAC,oCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAH,OAAkF;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6BH,KAAK,CAACM,QAAN,CAAeZ,MAA5C,CAAlF,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAG;AAAM,MAAA,SAAS,EAAC,oCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAH,OAAqE;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6B,IAAIkB,IAAJ,CAASZ,KAAK,CAACa,IAAf,EAAqBC,cAArB,EAA7B,CAArE,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAG;AAAM,MAAA,SAAS,EAAC,oCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAH,OAA4E;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA8BV,UAAU,CAACW,OAAX,CAAmB,CAAnB,CAA9B,CAA5E,CAHF,CADF,CAFF,EASE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAA2B,MAAA,EAAE,EAAC,iBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,SAAS,EAAC,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF,CADF,CADF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGT,QADH,CAVF,CADF,CADF,CADF,CADF,CATF,CADF;AAkCD;;AAxEsC;;AA2EzC,SAASU,eAAT,CAA0BC,KAA1B,EAAiC;AAC/B,SAAO;AACLtB,IAAAA,UAAU,EAAEsB,KAAK,CAACtB,UADb;AAELF,IAAAA,aAAa,EAAEwB,KAAK,CAACxB;AAFhB,GAAP;AAID;;AAED,SAASyB,kBAAT,CAA6BC,QAA7B,EAAuC;AACrC,SAAO;AACL7B,IAAAA,eAAe,EAAE,MAAM6B,QAAQ,CAACrC,qBAAqB,EAAtB,CAD1B;AAELO,IAAAA,kBAAkB,EAAE,MAAM8B,QAAQ,CAACpC,wBAAwB,EAAzB;AAF7B,GAAP;AAID;;AAED,eAAeC,OAAO,CAACgC,eAAD,EAAkBE,kBAAlB,CAAP,CAA6CjC,gBAA7C,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport OrderDetailsRow from './OrderDetailsRow'\nimport Auth from '../../utils/auth'\nimport NotFoundPage from '../common/NotFound/NotFoundPage'\nimport {fetchUserOrdersAction, fetchPendingOrdersAction} from '../../actions/ordersActions'\nimport { connect } from 'react-redux'\n\nclass OrderDetailsPage extends Component {\n  componentWillMount () {\n    if (Auth.isUserAdmin()) {\n      this.props.fetchPendingOrders()\n    } else {\n      this.props.fetchUserOrders()\n    }\n  }\n\n  render () {\n    let orders\n    if (Auth.isUserAdmin()) {\n      if (this.props.pendingOrders.length === 0) {\n        return (<h3 className='text-primary'>Loading...</h3>)\n      }\n      orders = this.props.pendingOrders\n    } else {\n      if (this.props.userOrders.length === 0) {\n        return (<h3 className='text-primary'>Loading...</h3>)\n      }\n      orders = this.props.userOrders\n    }\n\n    let orderId = this.props.match.params.id\n    let order = orders.find(o => o._id === orderId)\n    if (!order) {\n      return (\n        <NotFoundPage errMessage='ORDER NOT FOUND' />\n      )\n    }\n\n    let totalPrice = 0\n    for (const product of order.products) {\n      totalPrice += product.quantity * product.price\n    }\n\n    let products = order.products.map((p, i) => (<OrderDetailsRow key={i} product={p} index={i} />))\n\n    return (\n      <div className='container mt-4'>\n        <h1 className='text-center'>Order #{order._id}</h1>\n        <div className='row space-top'>\n          <div className='col-md-12 mt-3'>\n            <p><span className='font-weight-bold lead text-warning'>Products In Order:</span> <span className='ml-2 lead'>{order.products.length}</span></p>\n            <p><span className='font-weight-bold lead text-warning'>Date:</span> <span className='ml-2 lead'>{new Date(order.date).toLocaleString()}</span></p>\n            <p><span className='font-weight-bold lead text-warning'>Total Price:</span> <span className='ml-2 lead'>${totalPrice.toFixed(2)}</span></p>\n          </div>\n        </div>\n        <div className='row mt-5'>\n          <div className='col-md-12' id='customer-orders'>\n            <div className='box'>\n              <div className='table-responsive'>\n                <table className='table table-hover'>\n                  <thead>\n                    <tr>\n                      <th>Product</th>\n                      <th>Name</th>\n                      <th>Price</th>\n                      <th>Quantity</th>\n                      <th>Subtotal</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {products}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps (state) {\n  return {\n    userOrders: state.userOrders,\n    pendingOrders: state.pendingOrders\n  }\n}\n\nfunction mapDispatchToProps (dispatch) {\n  return {\n    fetchUserOrders: () => dispatch(fetchUserOrdersAction()),\n    fetchPendingOrders: () => dispatch(fetchPendingOrdersAction())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OrderDetailsPage)\n"]},"metadata":{},"sourceType":"module"}