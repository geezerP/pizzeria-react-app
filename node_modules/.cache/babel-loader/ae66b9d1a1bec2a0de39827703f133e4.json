{"ast":null,"code":"var _jsxFileName = \"/home/geezer/projects/pizzeria/pizzeria-react-app/src/components/edit/EditPage.js\";\nimport React, { Component } from 'react';\nimport Input from '../common/Input';\nimport toastr from 'toastr';\nimport createProductValidator from '../../utils/createProductValidator';\nimport NotFoundPage from '../common/NotFound/NotFoundPage';\nimport { createProductValidationFunc } from '../../utils/formValidator';\nimport { editProductAction, fetchProductsAction } from '../../actions/productsActions';\nimport { redirectAction } from '../../actions/authActions';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nclass EditPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      ingredients: '',\n      description: '',\n      weight: '',\n      price: '',\n      image: ''\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentWillMount() {\n    const productId = this.props.match.params.id;\n    let product = this.props.products.find(p => p._id === productId);\n\n    if (product) {\n      this.setState({\n        name: product.name,\n        ingredients: product.ingredients.join(','),\n        description: product.description,\n        weight: product.weight,\n        price: product.price.toFixed(2),\n        image: product.image\n      });\n    } else {\n      this.props.fetchProducts();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.editProductError.hasError) {\n      toastr.error(nextProps.editProductError.message);\n    } else if (nextProps.editProductSuccess) {\n      this.props.redirect();\n      toastr.success('Product edited successfully');\n      this.props.history.push('/menu');\n    } else {\n      const productId = this.props.match.params.id;\n      let product = this.props.products.find(p => p._id === productId);\n\n      if (product) {\n        this.setState({\n          name: product.name,\n          ingredients: product.ingredients.join(','),\n          description: product.description,\n          weight: product.weight,\n          price: product.price.toFixed(2),\n          image: product.image\n        });\n      }\n    }\n  }\n\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n\n    if (!createProductValidator(this.state.name, this.state.ingredients, this.state.description, this.state.image, this.state.weight, this.state.price)) {\n      return;\n    }\n\n    this.props.editProduct(this.props.match.params.id, this.state.name, this.state.ingredients, this.state.description, this.state.image, this.state.weight, this.state.price);\n  }\n\n  render() {\n    let productId = this.props.match.params.id;\n    let product = this.props.products.find(o => o._id === productId);\n\n    if (!product) {\n      return React.createElement(NotFoundPage, {\n        errMessage: \"PRODUCT NOT FOUND\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      });\n    }\n\n    let validObj = createProductValidationFunc(this.state.name, this.state.ingredients, this.state.description, this.state.image, this.state.weight, this.state.price);\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row space-top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Edit Pizza\"))), React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row space-top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      name: \"name\",\n      label: \"Name\",\n      placeholder: \"Enter pizza name\",\n      value: this.state.name,\n      onChange: this.onChange,\n      valid: validObj.validName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"text\",\n      name: \"ingredients\",\n      label: \"Ingredients\",\n      placeholder: \"Enter ingredients for the pizza. Put a comma between them\",\n      value: this.state.ingredients,\n      onChange: this.onChange,\n      valid: validObj.validIngredients,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"text\",\n      name: \"description\",\n      label: \"Description\",\n      placeholder: \"Enter pizza description\",\n      value: this.state.description,\n      onChange: this.onChange,\n      valid: validObj.validDescription,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"text\",\n      name: \"image\",\n      label: \"Image URL\",\n      placeholder: \"Enter pizza image URL\",\n      value: this.state.image,\n      onChange: this.onChange,\n      valid: validObj.validImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"number\",\n      name: \"weight\",\n      label: \"Weight\",\n      placeholder: \"Enter pizza weight\",\n      value: this.state.weight,\n      onChange: this.onChange,\n      valid: validObj.validWeight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"number\",\n      name: \"price\",\n      label: \"Price\",\n      placeholder: \"Enter pizza price\",\n      value: this.state.price,\n      onChange: this.onChange,\n      valid: validObj.validPrice,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"btn btn-warning\",\n      value: \"Edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    editProductSuccess: state.editProduct.success,\n    editProductError: state.editProductError,\n    products: state.products\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    editProduct: (id, name, ingredients, description, image, weight, price) => {\n      dispatch(editProductAction(id, {\n        name,\n        ingredients,\n        description,\n        image,\n        weight,\n        price\n      }));\n    },\n    redirect: () => dispatch(redirectAction()),\n    fetchProducts: () => dispatch(fetchProductsAction())\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(EditPage));","map":{"version":3,"sources":["/home/geezer/projects/pizzeria/pizzeria-react-app/src/components/edit/EditPage.js"],"names":["React","Component","Input","toastr","createProductValidator","NotFoundPage","createProductValidationFunc","editProductAction","fetchProductsAction","redirectAction","connect","withRouter","EditPage","constructor","props","state","name","ingredients","description","weight","price","image","onChange","bind","onSubmit","componentWillMount","productId","match","params","id","product","products","find","p","_id","setState","join","toFixed","fetchProducts","componentWillReceiveProps","nextProps","editProductError","hasError","error","message","editProductSuccess","redirect","success","history","push","e","target","value","preventDefault","editProduct","render","o","validObj","validName","validIngredients","validDescription","validImage","validWeight","validPrice","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport Input from '../common/Input'\nimport toastr from 'toastr'\nimport createProductValidator from '../../utils/createProductValidator'\nimport NotFoundPage from '../common/NotFound/NotFoundPage'\nimport {createProductValidationFunc} from '../../utils/formValidator'\nimport {editProductAction, fetchProductsAction} from '../../actions/productsActions'\nimport {redirectAction} from '../../actions/authActions'\nimport {connect} from 'react-redux'\nimport {withRouter} from 'react-router-dom'\n\nclass EditPage extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      name: '',\n      ingredients: '',\n      description: '',\n      weight: '',\n      price: '',\n      image: ''\n    }\n\n    this.onChange = this.onChange.bind(this)\n    this.onSubmit = this.onSubmit.bind(this)\n  }\n\n  componentWillMount () {\n    const productId = this.props.match.params.id\n    let product = this.props.products.find(p => p._id === productId)\n    if (product) {\n      this.setState({\n        name: product.name,\n        ingredients: product.ingredients.join(','),\n        description: product.description,\n        weight: product.weight,\n        price: product.price.toFixed(2),\n        image: product.image\n      })\n    } else {\n      this.props.fetchProducts()\n    }\n  }\n\n  componentWillReceiveProps (nextProps) {\n    if (nextProps.editProductError.hasError) {\n      toastr.error(nextProps.editProductError.message)\n    } else if (nextProps.editProductSuccess) {\n      this.props.redirect()\n      toastr.success('Product edited successfully')\n      this.props.history.push('/menu')\n    } else {\n      const productId = this.props.match.params.id\n      let product = this.props.products.find(p => p._id === productId)\n      if (product) {\n        this.setState({\n          name: product.name,\n          ingredients: product.ingredients.join(','),\n          description: product.description,\n          weight: product.weight,\n          price: product.price.toFixed(2),\n          image: product.image\n        })\n      }\n    }\n  }\n\n  onChange (e) {\n    this.setState({[e.target.name]: e.target.value})\n  }\n\n  onSubmit (e) {\n    e.preventDefault()\n    if (!createProductValidator(this.state.name, this.state.ingredients,\n      this.state.description, this.state.image, this.state.weight, this.state.price)) {\n      return\n    }\n    this.props.editProduct(this.props.match.params.id, this.state.name, this.state.ingredients,\n      this.state.description, this.state.image, this.state.weight, this.state.price)\n  }\n\n  render () {\n    let productId = this.props.match.params.id\n    let product = this.props.products.find(o => o._id === productId)\n    if (!product) {\n      return (\n        <NotFoundPage errMessage='PRODUCT NOT FOUND' />\n      )\n    }\n\n    let validObj = createProductValidationFunc(\n      this.state.name,\n      this.state.ingredients,\n      this.state.description,\n      this.state.image,\n      this.state.weight,\n      this.state.price\n    )\n\n    return (\n      <div className='container'>\n        <div className='row space-top'>\n          <div className='col-md-12'>\n            <h1>Edit Pizza</h1>\n          </div>\n        </div>\n        <form onSubmit={this.onSubmit}>\n          <div className='row space-top'>\n            <div className='col-md-4'>\n              <Input\n                type='text'\n                name='name'\n                label='Name'\n                placeholder='Enter pizza name'\n                value={this.state.name}\n                onChange={this.onChange}\n                valid={validObj.validName} />\n              <Input\n                type='text'\n                name='ingredients'\n                label='Ingredients'\n                placeholder='Enter ingredients for the pizza. Put a comma between them'\n                value={this.state.ingredients}\n                onChange={this.onChange}\n                valid={validObj.validIngredients} />\n              <Input\n                type='text'\n                name='description'\n                label='Description'\n                placeholder='Enter pizza description'\n                value={this.state.description}\n                onChange={this.onChange}\n                valid={validObj.validDescription} />\n              <Input\n                type='text'\n                name='image'\n                label='Image URL'\n                placeholder='Enter pizza image URL'\n                value={this.state.image}\n                onChange={this.onChange}\n                valid={validObj.validImage} />\n              <Input\n                type='number'\n                name='weight'\n                label='Weight'\n                placeholder='Enter pizza weight'\n                value={this.state.weight}\n                onChange={this.onChange}\n                valid={validObj.validWeight} />\n              <Input\n                type='number'\n                name='price'\n                label='Price'\n                placeholder='Enter pizza price'\n                value={this.state.price}\n                onChange={this.onChange}\n                valid={validObj.validPrice} />\n              <input type='submit' className='btn btn-warning' value='Edit' />\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps (state) {\n  return {\n    editProductSuccess: state.editProduct.success,\n    editProductError: state.editProductError,\n    products: state.products\n  }\n}\n\nfunction mapDispatchToProps (dispatch) {\n  return {\n    editProduct: (id, name, ingredients, description, image, weight, price) => {\n      dispatch(editProductAction(id, {name, ingredients, description, image, weight, price}))\n    },\n    redirect: () => dispatch(redirectAction()),\n    fetchProducts: () => dispatch(fetchProductsAction())\n  }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(EditPage))\n"]},"metadata":{},"sourceType":"module"}