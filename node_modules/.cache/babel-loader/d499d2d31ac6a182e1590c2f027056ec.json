{"ast":null,"code":"var _jsxFileName = \"/home/geezer/projects/pizzeria/pizzeria-react-app/src/components/create/CreatePage.js\";\nimport React, { Component } from 'react';\nimport Input from '../common/Input';\nimport toastr from 'toastr';\nimport createProductValidator from '../../utils/createProductValidator';\nimport { createProductValidationFunc } from '../../utils/formValidator';\nimport { createProductAction } from '../../actions/productsActions';\nimport { redirectAction } from '../../actions/authActions';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nclass CreatePage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      ingredients: '',\n      description: '',\n      weight: '',\n      price: '',\n      image: ''\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.createProductError.hasError) {\n      toastr.error(nextProps.createProductError.message);\n    } else if (nextProps.createProductSuccess) {\n      this.props.redirect();\n      toastr.success('Pizza created successfully');\n      this.props.history.push('/menu');\n    }\n  }\n\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n\n    if (!createProductValidator(this.state.name, this.state.ingredients, this.state.description, this.state.image, this.state.weight, this.state.price)) {\n      return;\n    }\n\n    this.props.createProduct(this.state.name, this.state.ingredients, this.state.description, this.state.image, this.state.weight, this.state.price);\n  }\n\n  render() {\n    let validObj = createProductValidationFunc(this.state.name, this.state.ingredients, this.state.description, this.state.image, this.state.weight, this.state.price);\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row space-top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Create New Pizza\"))), React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row space-top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      name: \"name\",\n      label: \"Name\",\n      placeholder: \"Enter pizza name\",\n      value: this.state.name,\n      onChange: this.onChange,\n      valid: validObj.validName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"text\",\n      name: \"ingredients\",\n      label: \"Ingredients\",\n      placeholder: \"Enter ingredients for the pizza. Put a comma between them\",\n      value: this.state.ingredients,\n      onChange: this.onChange,\n      valid: validObj.validIngredients,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"text\",\n      name: \"description\",\n      label: \"Description\",\n      placeholder: \"Enter pizza description\",\n      value: this.state.description,\n      onChange: this.onChange,\n      valid: validObj.validDescription,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"text\",\n      name: \"image\",\n      label: \"Image URL\",\n      placeholder: \"Enter pizza image URL\",\n      value: this.state.image,\n      onChange: this.onChange,\n      valid: validObj.validImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"number\",\n      name: \"weight\",\n      label: \"Weight\",\n      placeholder: \"Enter pizza weight\",\n      value: this.state.weight,\n      onChange: this.onChange,\n      valid: validObj.validWeight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"number\",\n      name: \"price\",\n      label: \"Price\",\n      placeholder: \"Enter pizza price\",\n      value: this.state.price,\n      onChange: this.onChange,\n      valid: validObj.validPrice,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      value: \"Create\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    createProductSuccess: state.createProduct.success,\n    createProductError: state.createProductError\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    createProduct: (name, ingredients, description, image, weight, price) => {\n      dispatch(createProductAction({\n        name,\n        ingredients,\n        description,\n        image,\n        weight,\n        price\n      }));\n    },\n    redirect: () => dispatch(redirectAction())\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(CreatePage));","map":{"version":3,"sources":["/home/geezer/projects/pizzeria/pizzeria-react-app/src/components/create/CreatePage.js"],"names":["React","Component","Input","toastr","createProductValidator","createProductValidationFunc","createProductAction","redirectAction","connect","withRouter","CreatePage","constructor","props","state","name","ingredients","description","weight","price","image","onChange","bind","onSubmit","componentWillReceiveProps","nextProps","createProductError","hasError","error","message","createProductSuccess","redirect","success","history","push","e","setState","target","value","preventDefault","createProduct","render","validObj","validName","validIngredients","validDescription","validImage","validWeight","validPrice","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport Input from '../common/Input'\nimport toastr from 'toastr'\nimport createProductValidator from '../../utils/createProductValidator'\nimport {createProductValidationFunc} from '../../utils/formValidator'\nimport {createProductAction} from '../../actions/productsActions'\nimport {redirectAction} from '../../actions/authActions'\nimport {connect} from 'react-redux'\nimport {withRouter} from 'react-router-dom'\n\nclass CreatePage extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      name: '',\n      ingredients: '',\n      description: '',\n      weight: '',\n      price: '',\n      image: ''\n    }\n\n    this.onChange = this.onChange.bind(this)\n    this.onSubmit = this.onSubmit.bind(this)\n  }\n\n  componentWillReceiveProps (nextProps) {\n    if (nextProps.createProductError.hasError) {\n      toastr.error(nextProps.createProductError.message)\n    } else if (nextProps.createProductSuccess) {\n      this.props.redirect()\n      toastr.success('Pizza created successfully')\n      this.props.history.push('/menu')\n    }\n  }\n\n  onChange (e) {\n    this.setState({[e.target.name]: e.target.value})\n  }\n\n  onSubmit (e) {\n    e.preventDefault()\n    if (!createProductValidator(this.state.name, this.state.ingredients,\n      this.state.description, this.state.image, this.state.weight, this.state.price)) {\n      return\n    }\n    this.props.createProduct(this.state.name, this.state.ingredients,\n      this.state.description, this.state.image, this.state.weight, this.state.price)\n  }\n\n  render () {\n    let validObj = createProductValidationFunc(\n      this.state.name,\n      this.state.ingredients,\n      this.state.description,\n      this.state.image,\n      this.state.weight,\n      this.state.price\n    )\n\n    return (\n      <div className='container'>\n        <div className='row space-top'>\n          <div className='col-md-12'>\n            <h1>Create New Pizza</h1>\n          </div>\n        </div>\n        <form onSubmit={this.onSubmit}>\n          <div className='row space-top'>\n            <div className='col-md-4'>\n              <Input\n                type='text'\n                name='name'\n                label='Name'\n                placeholder='Enter pizza name'\n                value={this.state.name}\n                onChange={this.onChange}\n                valid={validObj.validName} />\n              <Input\n                type='text'\n                name='ingredients'\n                label='Ingredients'\n                placeholder='Enter ingredients for the pizza. Put a comma between them'\n                value={this.state.ingredients}\n                onChange={this.onChange}\n                valid={validObj.validIngredients} />\n              <Input\n                type='text'\n                name='description'\n                label='Description'\n                placeholder='Enter pizza description'\n                value={this.state.description}\n                onChange={this.onChange}\n                valid={validObj.validDescription} />\n              <Input\n                type='text'\n                name='image'\n                label='Image URL'\n                placeholder='Enter pizza image URL'\n                value={this.state.image}\n                onChange={this.onChange}\n                valid={validObj.validImage} />\n              <Input\n                type='number'\n                name='weight'\n                label='Weight'\n                placeholder='Enter pizza weight'\n                value={this.state.weight}\n                onChange={this.onChange}\n                valid={validObj.validWeight} />\n              <Input\n                type='number'\n                name='price'\n                label='Price'\n                placeholder='Enter pizza price'\n                value={this.state.price}\n                onChange={this.onChange}\n                valid={validObj.validPrice} />\n              <input type='submit' className='btn btn-primary' value='Create' />\n            </div>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps (state) {\n  return {\n    createProductSuccess: state.createProduct.success,\n    createProductError: state.createProductError\n  }\n}\n\nfunction mapDispatchToProps (dispatch) {\n  return {\n    createProduct: (name, ingredients, description, image, weight, price) => {\n      dispatch(createProductAction({name, ingredients, description, image, weight, price}))\n    },\n    redirect: () => dispatch(redirectAction())\n  }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(CreatePage))\n"]},"metadata":{},"sourceType":"module"}