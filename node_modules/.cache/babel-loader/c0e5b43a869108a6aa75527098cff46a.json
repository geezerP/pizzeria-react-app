{"ast":null,"code":"var _jsxFileName = \"/home/geezer/projects/pizzeria/pizzeria-react-app/src/App.js\";\nimport React, { Component } from 'react';\nimport Navbar from './components/common/Navbar';\nimport Footer from './components/common/Footer';\nimport Preloader from './components/common/Preloader/Preloader';\nimport HomePage from './components/home/HomePage';\nimport RegisterPage from './components/auth/RegisterPage';\nimport LoginPage from './components/auth/LoginPage';\nimport CreatePage from './components/create/CreatePage';\nimport EditPage from './components/edit/EditPage';\nimport MenuPage from './components/menu/MenuPage';\nimport DetailsPage from './components/details/DetailsPage';\nimport CartPage from './components/cart/CartPage';\nimport OrdersPage from './components/orders/OrdersPage';\nimport OrderDetailsPage from './components/orders/OrderDetailsPage';\nimport NotFoundPage from './components/common/NotFound/NotFoundPage';\nimport Auth from './utils/auth';\nimport PrivateRoute from './components/common/Routes/PrivateRoute';\nimport AdminRoute from './components/common/Routes/AdminRoute';\nimport fetchStatsAction from './actions/statsActions';\nimport toastr from 'toastr';\nimport { Switch, Route, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { logoutAction } from './actions/authActions';\nimport { fetchProductsAction } from './actions/productsActions';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggedIn: false\n    };\n    this.logout = this.logout.bind(this);\n  }\n\n  componentWillMount() {\n    if (Auth.isUserAuthenticated()) {\n      this.setState({\n        loggedIn: true\n      });\n    }\n\n    this.props.fetchStats();\n    this.props.fetchProducts();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.loginSuccess) {\n      this.setState({\n        loggedIn: true\n      });\n    }\n  }\n\n  logout() {\n    this.setState({\n      loggedIn: false\n    });\n    this.props.logout();\n    toastr.success('Logout successful');\n    this.props.history.push('/login');\n  }\n\n  render() {\n    const isAdmin = Auth.isUserAdmin();\n    const _this$props$stats = this.props.stats,\n          productsCount = _this$props$stats.productsCount,\n          usersCount = _this$props$stats.usersCount;\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      products: productsCount,\n      users: usersCount,\n      loggedIn: this.state.loggedIn,\n      isAdmin: isAdmin,\n      logout: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(Preloader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(\"main\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: HomePage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/menu\",\n      component: MenuPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/menu/:page\",\n      component: MenuPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/register\",\n      component: RegisterPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      component: LoginPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(AdminRoute, {\n      path: \"/admin/create\",\n      component: CreatePage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(AdminRoute, {\n      path: \"/admin/edit/:id\",\n      component: EditPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(AdminRoute, {\n      path: \"/admin/orders\",\n      component: OrdersPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(PrivateRoute, {\n      path: \"/details/:id\",\n      component: DetailsPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(PrivateRoute, {\n      path: \"/cart\",\n      component: CartPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(PrivateRoute, {\n      path: \"/orders/details/:id\",\n      component: OrderDetailsPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(PrivateRoute, {\n      exact: true,\n      path: \"/orders\",\n      component: OrdersPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), React.createElement(Route, {\n      component: NotFoundPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }))), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    loginSuccess: state.login.success,\n    stats: state.stats\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    logout: () => dispatch(logoutAction()),\n    fetchStats: () => dispatch(fetchStatsAction()),\n    fetchProducts: () => dispatch(fetchProductsAction())\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));","map":{"version":3,"sources":["/home/geezer/projects/pizzeria/pizzeria-react-app/src/App.js"],"names":["React","Component","Navbar","Footer","Preloader","HomePage","RegisterPage","LoginPage","CreatePage","EditPage","MenuPage","DetailsPage","CartPage","OrdersPage","OrderDetailsPage","NotFoundPage","Auth","PrivateRoute","AdminRoute","fetchStatsAction","toastr","Switch","Route","withRouter","connect","logoutAction","fetchProductsAction","App","constructor","props","state","loggedIn","logout","bind","componentWillMount","isUserAuthenticated","setState","fetchStats","fetchProducts","componentWillReceiveProps","nextProps","loginSuccess","success","history","push","render","isAdmin","isUserAdmin","stats","productsCount","usersCount","mapStateToProps","login","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Navbar from './components/common/Navbar'\nimport Footer from './components/common/Footer'\nimport Preloader from './components/common/Preloader/Preloader'\nimport HomePage from './components/home/HomePage'\nimport RegisterPage from './components/auth/RegisterPage'\nimport LoginPage from './components/auth/LoginPage'\nimport CreatePage from './components/create/CreatePage'\nimport EditPage from './components/edit/EditPage'\nimport MenuPage from './components/menu/MenuPage'\nimport DetailsPage from './components/details/DetailsPage'\nimport CartPage from './components/cart/CartPage'\nimport OrdersPage from './components/orders/OrdersPage'\nimport OrderDetailsPage from './components/orders/OrderDetailsPage'\nimport NotFoundPage from './components/common/NotFound/NotFoundPage'\nimport Auth from './utils/auth'\nimport PrivateRoute from './components/common/Routes/PrivateRoute'\nimport AdminRoute from './components/common/Routes/AdminRoute'\nimport fetchStatsAction from './actions/statsActions'\nimport toastr from 'toastr'\nimport { Switch, Route, withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { logoutAction } from './actions/authActions'\nimport { fetchProductsAction } from './actions/productsActions'\n\nclass App extends Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      loggedIn: false\n    }\n\n    this.logout = this.logout.bind(this)\n  }\n\n  componentWillMount () {\n    if (Auth.isUserAuthenticated()) {\n      this.setState({ loggedIn: true })\n    }\n    this.props.fetchStats()\n    this.props.fetchProducts()\n  }\n\n  componentWillReceiveProps (nextProps) {\n    if (nextProps.loginSuccess) {\n      this.setState({ loggedIn: true })\n    }\n  }\n\n  logout () {\n    this.setState({ loggedIn: false })\n    this.props.logout()\n    toastr.success('Logout successful')\n    this.props.history.push('/login')\n  }\n\n  render () {\n    const isAdmin = Auth.isUserAdmin()\n    const {productsCount, usersCount} = this.props.stats\n\n    return (\n      <div className='App'>\n        <Navbar\n          products={productsCount}\n          users={usersCount}\n          loggedIn={this.state.loggedIn}\n          isAdmin={isAdmin}\n          logout={this.logout} />\n        <Preloader />\n        <main>\n          <Switch>\n            <Route exact path='/' component={HomePage} />\n            <Route exact path='/menu' component={MenuPage} />\n            <Route exact path='/menu/:page' component={MenuPage} />\n            <Route path='/register' component={RegisterPage} />\n            <Route path='/login' component={LoginPage} />\n            <AdminRoute path='/admin/create' component={CreatePage} />\n            <AdminRoute path='/admin/edit/:id' component={EditPage} />\n            <AdminRoute path='/admin/orders' component={OrdersPage} />\n            <PrivateRoute path='/details/:id' component={DetailsPage} />\n            <PrivateRoute path='/cart' component={CartPage} />\n            <PrivateRoute path='/orders/details/:id' component={OrderDetailsPage} />\n            <PrivateRoute exact path='/orders' component={OrdersPage} />\n            <Route component={NotFoundPage} />\n          </Switch>\n        </main>\n        <Footer />\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps (state) {\n  return {\n    loginSuccess: state.login.success,\n    stats: state.stats\n  }\n}\n\nfunction mapDispatchToProps (dispatch) {\n  return {\n    logout: () => dispatch(logoutAction()),\n    fetchStats: () => dispatch(fetchStatsAction()),\n    fetchProducts: () => dispatch(fetchProductsAction())\n  }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App))\n"]},"metadata":{},"sourceType":"module"}